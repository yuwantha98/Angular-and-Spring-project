<div style="padding-top: 25px;"></div>
<div class="top-image">
  <img src="../../../../../assets/images/1.jpg" >
</div>

<div class="container mt-4 mb-5" style="background-color: #ffffff; padding: 20px; border-radius: 8px; box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1); margin-bottom:20px;">

  <!-- Spinner Replacement -->
  <div *ngIf="isSpinning" class="spinner">
    <p>Working...</p>
  </div>

  <div class="dashboard-filter" *ngIf="!isSpinning">
    <div class="filter-grid row gx-4 gy-3" [formGroup]="validateForm" style="margin-bottom: 20px;">

      <!-- Brand Filter -->
      <div class="col-md-3">
        <div class="form-group">
          <label for="brand" style="font-weight: bold; color: #003973;">Brand</label>
          <select id="brand" formControlName="brand" class="form-control" placeholder="Brand">
            <option *ngFor="let brand of listOfBrands" [value]="brand">{{ brand }}</option>
          </select>
          <small *ngIf="validateForm.controls['brand'].hasError('required') && validateForm.controls['brand'].touched" class="text-danger">
            This Input Is Required!
          </small>
        </div>
      </div>

      <!-- Type Filter -->
      <div class="col-md-3">
        <div class="form-group">
          <label for="type" style="font-weight: bold; color: #003973;">Type</label>
          <select id="type" formControlName="type" class="form-control" placeholder="Type">
            <option *ngFor="let type of listOfType" [value]="type">{{ type }}</option>
          </select>
          <small *ngIf="validateForm.controls['type'].hasError('required') && validateForm.controls['type'].touched" class="text-danger">
            This Input Is Required!
          </small>
        </div>
      </div>

      <!-- Color Filter -->
      <div class="col-md-3">
        <div class="form-group">
          <label for="color" style="font-weight: bold; color: #003973;">Color</label>
          <select id="color" formControlName="color" class="form-control" placeholder="Color">
            <option *ngFor="let color of listOfColor" [value]="color">{{ color }}</option>
          </select>
          <small *ngIf="validateForm.controls['color'].hasError('required') && validateForm.controls['color'].touched" class="text-danger">
            This Input Is Required!
          </small>
        </div>
      </div>

      <!-- Transmission Filter -->
      <div class="col-md-3">
        <div class="form-group">
          <label for="transmission" style="font-weight: bold; color: #003973;">Transmission</label>
          <select id="transmission" formControlName="transmission" class="form-control" placeholder="Transmission">
            <option *ngFor="let transmission of listOfTransmission" [value]="transmission">{{ transmission }}</option>
          </select>
          <small *ngIf="validateForm.controls['transmission'].hasError('required') && validateForm.controls['transmission'].touched" class="text-danger">
            This Input Is Required!
          </small>
        </div>
      </div>

      <!-- Search Button -->
      <div class="col-12 text-end mt-3">
        <button type="button" class="btn btn-primary fw-bold" (click)="searchCar()" style="padding-bottom:12px">
          Search Car
        </button>
      </div>
    </div>
  </div>


  <!-- Car Listing Section -->
  <div class="row gy-4">
    <div class="col-md-6" *ngFor="let car of cars">
      <div class="card h-80 shadow-sm" style="border-radius: 8px; overflow: hidden;">
        <div class="row g-0">

          <!-- Car Image -->
          <div class="col-md-6 p-3">
            <img class="img-fluid" [src]="car.processedImg" alt="profile" style="height: 200px; object-fit: cover; border-radius: 8px 0 0 8px;" />
          </div>

          <!-- Car Details -->
          <div class="col-md-6 p-3">
            <h4 style="cursor: pointer; color: #108ee9; font-weight: bold;">
              {{car.brand}} - {{car.name}}
            </h4>
            <p class="text-muted" style="margin-bottom: 10px;">{{car.description}}</p>
            <hr style="margin: 10px 0;">
            <p style="font-size: 0.95rem; line-height: 1.6;">
              <strong>Price:</strong> Rs.{{car.price}}<br>
              <strong>Color:</strong> {{car.color}}<br>
              <strong>Transmission:</strong> {{car.transmission}}<br>
              <strong>Type:</strong> {{car.type}}<br>
              <strong>Year:</strong> {{car.modelYear | date: 'yyyy'}}
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


